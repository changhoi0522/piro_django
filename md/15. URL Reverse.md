# URL Reverse

## Django URL Djspatcher

urls.py 변경만으로 '각 뷰에 대한 url'이 변경되는 유연한 url 시스템

```
urlpatterns = [
	re_path(r'^blog/$', blog_views.post_list, name='post_list'),
    re_path(r'^blog/(?P<<id>\d+)$', blog_views.post_detail, name='post_detail'),
    
]
# 위는 /blog/, /blog/1/ 주소로 서비스 
urlpatterns = [
	re_path(r'^weblog/$', blog_views.post_list, name='post_list'),
    url(r'^weblog/(?P<id>/d+)$', blog_views.post_detail, name='post_detail'),
    
]
# 위는 /weblog/, /weblog/1/ 주소로 서비스
```


## URL Reverse
- 개발자가 일일이 URL을 계산하지 않아도 된다.
- URL이 변경되더라도, URL Reverse가 변경된 URL을 추적해서, 누락될 위험이 없다
- URL으로 view함수를 찾게 하기 보다는 view함수가 url을 기억하는 것으로 urlConf를 지정하는 것: URL Reverse
- URL이 변경될 때마다, 이 URL을 참조하고 있는 코드를 일일이 찾아서 변경하는 것은 너무 번거롭고, 수정건을 누락시킬 여지가 많다
- `name=[URL 대표 이름]`으로 간단하게 가능
- cf. model에서 사용되는 `verbose_name`과 헷갈리지말기

### URL Reverse를 수행하는 4가지 함수
- `reverse` 함수: 해당 이름을 가진 url을 리턴해준다. 매칭 URL이 없으면 NoReverseMatch 예외 발생
- `resolve_url` 함수: 해당 이름을 가진 url을 리턴해준다. 매칭 URL이 없으면 '인자 문자열'을 그대로 리턴
	* 내부적으로 `reverse` 함수를 사용함
- `redirect` 함수: 해당 이름을 가진 url의 HttpResponse를 리턴한다 매칭 URL이 없으면 '인자 문자열'을 URL로 판단. view함수의 리턴값으로 다른 url로 넘어갈 때 사용하기 좋다
	* 내부적으로 `resolve_url` 함수를 사용함
- url template tag: 템플릿에서 `{% url 'name' [필요 인자] %}`
	* 내부적으로 reverse 함수가 사용됨

ex.
```
reverse_url_str = reverse('blog:post_detail', args=[100])
reverse_url_str = reverse('blog:post_detail', kargs={'id': 100})
# return 값은 str

reverse_url_str = resolve_url('blog:post_detail', 100)
reverse_url_str = resolve_url('blog:post_detail', id=100)
# return 값은 str

response = redirect('blog:post_detail',100)
response = redirect('blog:post_detail',id=100)
# return 값은 HttpResponse

# 실제 예시
# localhost:8000/으로 들어왔을 때 자동으로 /blog/로 리다이렉트 하기

#project/urls.py에서
urlpatterns = [
	path('', lambda r: redirect(blog:post_list, name='root'))
]
```
- `blog:post_detail` 의 `blog`는 namespace이다. 해당 앱의 urls.py 에(여기서는 `blog/urls.py`) `app_name='namespace이름'`으로 변수를 설정해주는 것으로 namespace를 설정할 수 있다
